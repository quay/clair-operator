apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: indexers.clairproject.org
spec:
  group: clairproject.org
  names:
    categories: []
    kind: Indexer
    plural: indexers
    shortNames:
    - indexer
    singular: indexer
  scope: Namespaced
  versions:
  - additionalPrinterColumns: []
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Auto-generated derived type for IndexerSpec via `CustomResource`
        properties:
          spec:
            description: IndexerSpec describes the desired state of an Indexer instance.
            properties:
              config:
                description: Config is configuration sources for the Clair instance.
                properties:
                  dropins:
                    description: Dropins is a list of references to drop-in configs.
                    items:
                      description: DropinSelector represents a source for the value of a Clair configuration dropin.
                      properties:
                        key:
                          description: The key to select.
                          type: string
                        name:
                          description: The name of the referent.
                          type: string
                        type:
                          description: Type of the refererent.
                          enum:
                          - ConfigMap
                          - Secret
                          type: string
                      required:
                      - key
                      - name
                      - type
                      type: object
                      x-kubernetes-validations:
                      - message: '"type" must be populated with a known type'
                        rule: self.type == 'ConfigMap' || self.type == 'Secret'
                      - message: '"name" must be populated'
                        rule: self.name != ''
                      - message: '"key" must be populated'
                        rule: self.key != ''
                    type: array
                    x-kubernetes-list-map-keys:
                    - type
                    - key
                    - name
                    x-kubernetes-list-type: map
                  root:
                    description: Root is a reference to the main config.
                    properties:
                      key:
                        description: The key to select.
                        type: string
                      name:
                        description: The name of the referent.
                        type: string
                    required:
                    - key
                    - name
                    type: object
                    x-kubernetes-validations:
                    - message: '"name" must be populated'
                      rule: self.name != ''
                    - message: '"key" must be populated'
                      rule: self.key != ''
                required:
                - root
                type: object
              gateway:
                description: Gateway is the object to attach Gateway API routes to.
                nullable: true
                properties:
                  group:
                    description: |-
                      Group is the group of the referent.

                      When unspecified, "gateway.networking.k8s.io" is inferred. To set the core API group (such
                      as for a "Service" kind referent), Group must be explicitly set to "" (empty string).

                      Support: Core
                      MaxLength: 253
                      Pattern: ^$\|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                    maxLength: 253
                    nullable: true
                    pattern: ^$\|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                    type: string
                  kind:
                    description: |-
                      Kind is kind of the referent.

                      There are two kinds of parent resources with "Core" support:

                      - Gateway (Gateway conformance profile)
                      - Service (Mesh conformance profile, ClusterIP Services only)

                      Support for other resources is Implementation-Specific.

                      MaxLength: 63
                      MinLength: 1
                      Pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                    maxLength: 253
                    minLength: 1
                    nullable: true
                    pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                    type: string
                  name:
                    description: |-
                      Name is the name of the referent.

                      Support: Core
                      MaxLength: 253
                      MinLength: 1
                    maxLength: 253
                    minLength: 1
                    type: string
                  namespace:
                    description: |-
                      Namespace is the namespace of the referent.

                      When unspecified, this refers to the local namespace of the Route.

                      Note that there are specific rules for ParentRefs which cross namespace boundaries.
                      Cross-namespace references are only valid if they are explicitly allowed by something in
                      the namespace they are referring to. For example: Gateway has the AllowedRoutes field, and
                      ReferenceGrant provides a generic way to enable any other kind of cross-namespace
                      reference.

                      ParentRefs from a Route to a Service in the same namespace are "producer" routes, which
                      apply default routing rules to inbound connections from any namespace to the Service.
                      ParentRefs from a Route to a Service in a different namespace are "consumer" routes, and
                      these routing rules are only applied to outbound connections originating from the same
                      namespace as the Route, for which the intended destination of the connections are a Service
                      targeted as a ParentRef of the Route.

                      Support: Core
                      MaxLength: 63
                      MinLength: 1
                      Pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    maxLength: 63
                    minLength: 1
                    nullable: true
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                  sectionName:
                    description: |-
                      SectionName is the name of a section within the target resource.

                      In the following resources, SectionName is interpreted as the following:

                      - Gateway: Listener name. When both Port (experimental) and SectionName are specified, the
                        name and port of the selected listener must match both specified values.
                      - Service: Port name. When both Port (experimental) and SectionName are specified, the name
                        and port of the selected listener must match both specified values.

                      Implementations MAY choose to support attaching Routes to other resources. If that is the
                      case, they MUST clearly document how SectionName is interpreted.

                      When unspecified (empty string), this will reference the entire resource. For the purpose
                      of status, an attachment is considered successful if at least one section in the parent
                      resource accepts it. For example, Gateway listeners can restrict which Routes can attach to
                      them by Route kind, namespace, or hostname. If 1 of 2 Gateway listeners accept attachment
                      from the referencing Route, the Route MUST be considered successfully attached. If no
                      Gateway listeners accept attachment from this Route, the Route MUST be considered detached
                      from the Gateway.

                      Support: Core
                    nullable: true
                    type: string
                required:
                - name
                type: object
              image:
                description: Image is the image that should be used in the managed deployment.
                nullable: true
                type: string
            required:
            - config
            type: object
          status:
            description: WorkerStatus describes the observed state of a worker instance.
            nullable: true
            properties:
              conditions:
                description: Conditions reports k8s-style conditions for various parts of the system.
                items:
                  description: Condition contains details for one aspect of the current state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: lastTransitionTime is the last time the condition transitioned from one status to another. This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: message is a human readable message indicating details about the transition. This may be an empty string.
                      type: string
                    observedGeneration:
                      description: observedGeneration represents the .metadata.generation that the condition was set based upon. For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date with respect to the current state of the instance.
                      format: int64
                      type: integer
                    reason:
                      description: reason contains a programmatic identifier indicating the reason for the condition's last transition. Producers of specific condition types may define expected values and meanings for this field, and whether the values are considered a guaranteed API. The value should be a CamelCase string. This field may not be empty.
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                nullable: true
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              dropin:
                description: |-
                  Dropin is a generated JSON dropin configuration that a Clair instance may use to construct
                  its configuration.
                nullable: true
                type: string
              refs:
                description: Refs holds on to references to objects needed by this instance.
                items:
                  description: TypedLocalObjectReference contains enough information to let you locate the typed referenced object inside the same namespace.
                  properties:
                    apiGroup:
                      description: APIGroup is the group for the resource being referenced. If APIGroup is not specified, the specified Kind must be in the core API group. For any other third-party types, APIGroup is required.
                      type: string
                    kind:
                      description: Kind is the type of resource being referenced
                      type: string
                    name:
                      description: Name is the name of resource being referenced
                      type: string
                  required:
                  - kind
                  - name
                  type: object
                nullable: true
                type: array
                x-kubernetes-list-map-keys:
                - kind
                x-kubernetes-list-type: map
            type: object
        required:
        - spec
        title: Indexer
        type: object
    served: true
    storage: true
    subresources:
      status: {}
